
Before running this function and procedure block create 2 tables marks and result and insert values in marks 
DELIMITER //

CREATE FUNCTION get_class(p_marks INT) RETURNS VARCHAR(20)
DETERMINISTIC
BEGIN
    DECLARE grade VARCHAR(20);

    IF p_marks BETWEEN 991 AND 1499 THEN
        SET grade = 'Distinction';
    END IF;

    IF p_marks BETWEEN 890 AND 989 THEN
        SET grade = 'First Class';
    END IF;

    IF p_marks BETWEEN 826 AND 889 THEN
        SET grade = 'Higher Second Class';
    END IF;

    IF p_marks BETWEEN 751 AND 825 THEN
        SET grade = 'Second Class';
    END IF;

    IF p_marks BETWEEN 651 AND 750 THEN
        SET grade = 'Passed';
    END IF;

    IF p_marks < 651 THEN
        SET grade = 'Fail';
    END IF;

    RETURN grade;
END;
//

DELIMITER ;


DELIMITER //

CREATE PROCEDURE final_result(IN R1 INT)
BEGIN
    DECLARE fmarks INT;
    DECLARE stud_name VARCHAR(50);
    DECLARE grade VARCHAR(20);

    -- Fetch marks and name safely
    SELECT name, total_marks INTO stud_name, fmarks
    FROM marks
    WHERE roll_no = R1
    LIMIT 1;

    -- If no record found, set defaults
    IF stud_name IS NULL THEN
        SET stud_name = 'Unknown';
        SET fmarks = 0;
    END IF;

    -- Call function to calculate class
    SET grade = get_class(fmarks);

    -- Insert into result table
    INSERT INTO result(roll_no, name, class)
    VALUES (R1, stud_name, grade);

    -- Display output
    SELECT stud_name, grade AS class;
END;
//

DELIMITER ;
Ex :- CALL final_result(29);


